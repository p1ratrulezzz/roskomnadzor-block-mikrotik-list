# roskomnadzor-block-mikrotik-list

Этот скрипт позволит извлечь ipv4 адреса из JSON файла с массивом IP адресов и получить команду для добавления address-list для Mikrotik.

Некоторые провайдеры могут не блокировать доступ к запрещенным в РФ сайтам, что создает опасность для пользователей вашей домашней или офисной сети, позволяя получить доступ к сайтам, на которых могут быть совершены попытки похищения данных или прочее. Реестр заблокированных в РФ сайтов есть в свободном доступе - можете найти его в формате JSON и используя этот скрипт получить текстовый файл в виде

```

/ip firewall address-list
add address=127.0.0.1 list=blocked_rkn_ips
...

```

Чтобы потом добавить его в роутер Mikrotik и настроить правило для блокировки этих айпи адресов.

# Порядок действий

1. Скачать и установить python отсюда https://www.python.org/
2. Положить файл rkn.json со списком адерсов рядом с process.py
3. В файле process.py изменить по желанию первые переменные с именем файла и именем списка для роутера
4. Запустить из командной строки python3 process.py
5. В папке resources будет создан файл ipv4.txt со списком заблокированных адресов в удобном для добавления виде

# Блокировка этих IP адресов в роутере Mikrotik

1. Создаем правило IP->Firewall->Mangle 
chain=prerouting action=mark-routing routing-mark=blocked_ips dst-address-list=blocked_ips
2. Создаем правило для фильтра в IP->Firewall->Filter
chain=forward action=drop routing-mark=blocked_ips

Все. Теперь ваша домашняя или офисная сеть обезопасена от заблокированных ресурсов, даже если ваш провайдер по какой-то причине не заблокировал доступ к ним.
